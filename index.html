<script>
  const audio = document.getElementById("audio");
  const coverImage = document.getElementById("coverImage");
  const playButton = document.getElementById("playButton");
  const songTitle = document.getElementById("songTitle");
  const artistName = document.getElementById("artistName");

  let currentTrack = 1;
  let fullscreenRequested = false;

  const songs = {
    1: { title: "I'll Take Care of You", artist: "Tyler, The Creator ðŸ’™", src: "music.mp3", cover: "cover.jpg" },
    2: { title: "Pag-Ibig ay Kanibalismo II", artist: "fitterkarma", src: "music2.mp3", cover: "cover2.jpg" }
  };

  function showDefault() {
    coverImage.src = "default.gif";
    coverImage.classList.add("no-frame");
    songTitle.style.display = 'none';
    artistName.style.display = 'none';
  }

  function showCover(trackId) {
    const song = songs[trackId];
    coverImage.src = song.cover;
    coverImage.classList.remove("no-frame");
    songTitle.textContent = song.title;
    artistName.textContent = song.artist;
    songTitle.style.display = 'block';
    artistName.style.display = 'block';
  }

  function loadTrack(trackId) {
    currentTrack = trackId;
    const song = songs[trackId];
    const source = audio.querySelector('source');
    source.src = song.src;
    audio.load();
  }

  function playAudio() {
    if (!fullscreenRequested) {
      requestFullscreen();
      fullscreenRequested = true;
    }
    audio.play().then(() => {
      playButton.style.display = 'none';
      showCover(currentTrack);
    });
  }

  function pauseAudio() {
    audio.pause();
    playButton.style.display = 'flex';
    showDefault();
  }

  function toggleAudio() {
    if (audio.paused) {
      playAudio();
    } else {
      pauseAudio();
    }
  }

  function requestFullscreen() {
    const elem = document.documentElement;
    if (elem.requestFullscreen) elem.requestFullscreen();
    else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
    else if (elem.msRequestFullscreen) elem.msRequestFullscreen();
  }

  audio.addEventListener('pause', () => {
    playButton.style.display = 'flex';
    showDefault();
  });

  // âœ… Loop forever: when song ends, go to next and autoplay
  audio.addEventListener('ended', () => {
    const next = currentTrack === Object.keys(songs).length ? 1 : currentTrack + 1;
    loadTrack(next);
    showCover(next);
    audio.play();
  });

  // Show default.gif on page load
  showDefault();
</script>
